name: Teste CI/CD Integrado

on:
  workflow_dispatch:
  push:
    branches: [develop, main]

jobs:
  run_tests:
    name: ðŸ§ª Executar Testes com Template
    uses: heliomarpm/ci-reusable/.github/workflows/node-test.yml@main
    with:
      node_version: '20.x' 

  create_pr:
    needs: run_tests
    if: success() && github.ref == 'refs/heads/develop'    
    name: ðŸ¤– Criar/Atualizar Pull Request (develop -> main)
    uses: heliomarpm/ci-resuable/.github/workflows/node-pr.yml@main
    with:
      head_branch: 'develop'
      base_branch: 'main'             